
if [[ $- != *i* ]]; then
    source /usr/share/Modules/init/bash
fi

module purge

module load hpcx-mt-ompi-gcc
module load gcc/13.2.0

# ZLIB:  ./configure --prefix=/scratch/ywang/tools/gnu
# HDF5:  CC=mpicc ./configure --with-zlib=/scratch/ywang/tools/gnu --prefix=/scratch/ywang/tools/gnu --enable-parallel
# netcdf-C: CC=mpicc CPPFLAGS='-I/scratch/ywang/tools/gnu/include' LDFLAGS='-L/scratch/ywang/tools/gnu/lib'
#           ./configure --prefix=/scratch/ywang/tools/gnu --disable-libxml2 --disable-shared --enable-parallel-tests
# netcdf-fortran:
#       export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/scratch/ywang/tools/gnu/lib
#       CC=mpicc CPPFLAGS='-I/scratch/ywang/tools/gnu/include' LDFLAGS='-L/scratch/ywang/tools/gnu/lib -lnetcdf -lhdf5_hl -lhdf5 -lm -lz -ldl -lbz2 -lzstd -lcurl -lstdc++'
#       LIBS='-L/scratch/ywang/tools/gnu/lib -lnetcdf -lhdf5_hl -lhdf5 -lm -lz -ldl -lbz2 -lzstd -lcurl -lstdc++'
#       ./configure --prefix=/scratch/ywang/tools/gnu --disable-shared --enable-parallel-tests

export GNU_LIBPATH=/scratch/ywang/tools/gnu
#export ZLIB=/scratch/ywang/tools/gnu
#export H5DIR=/scratch/ywang/tools/gnu
#export PNGPATH=/scratch/ywang/tools/gnu
#export JASPER=/scratch/ywang/tools/gnu

export NETCDF=${GNU_LIBPATH}
export PNETCDF=${GNU_LIBPATH}

export LD_LIBRARY_PATH=/scratch/software/gcc/gcc-13.2.0/lib64:${LD_LIBRARY_PATH}:/scratch/ywang/MPAS/tools/lib
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${GNU_LIBPATH}/lib:${GNU_LIBPATH}/lib64

export PATH=.:$PATH:${GNU_LIBPATH}/bin:/scratch/ywang/MPAS/tools/bin

if [[ $- == *i* ]]; then
    appendpath /scratch/ywang/MPAS/gnu/mpas_scripts/scripts /scratch/ywang/MPAS/gnu/mpas_scripts/python
fi
